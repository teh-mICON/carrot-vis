(function(t){function e(e){for(var o,s,r=e[0],u=e[1],l=e[2],c=0,d=[];c<r.length;c++)s=r[c],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);p&&p(e);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,r=1;r<n.length;r++){var u=n[r];0!==a[u]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},a={app:0},i=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var p=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{key:t.frame},[t.graphNetwork?n("Graph",{attrs:{network:t.graphNetwork,enable3d:t.enable3d}}):t._e(),n("div",{attrs:{id:"content"}},[n("div",{staticClass:"d-flex flex-row flexatron"},[n("div",{staticClass:"controls"},[n("div",{staticClass:"input-group input-group-sm"},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:"Maximum samples to feed the network",expression:"'Maximum samples to feed the network'",modifiers:{right:!0}}],staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text"},[t._v("X")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.goestimes,expression:"goestimes"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.goestimes},on:{change:t.updateGoestimes,input:function(e){e.target.composing||(t.goestimes=e.target.value)}}})]),n("div",{staticClass:"input-group input-group-sm"},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:"Minimum error rate before stopping",expression:"'Minimum error rate before stopping'",modifiers:{right:!0}}],staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text"},[t._v("cutoff")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.cutoff,expression:"cutoff"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.cutoff},on:{change:t.updateCutoff,input:function(e){e.target.composing||(t.cutoff=e.target.value)}}})]),n("div",{staticClass:"input-group input-group-sm"},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:"Update vis after epochs",expression:"'Update vis after epochs'",modifiers:{right:!0}}],staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text"},[t._v("update")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.updateInterval,expression:"updateInterval"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.updateInterval},on:{change:t.updateUpdateInterval,input:function(e){e.target.composing||(t.updateInterval=e.target.value)}}})])]),n("div",{staticClass:"controls"},[n("div",{staticClass:"input-group input-group-sm"},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Network learning rate",expression:"'Network learning rate'",modifiers:{left:!0}}],staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text"},[t._v("learning")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.learningRate,expression:"learningRate"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.learningRate},on:{change:t.updateLearningRate,input:function(e){e.target.composing||(t.learningRate=e.target.value)}}})]),n("div",{staticClass:"input-group input-group-sm"},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Node delta momentum",expression:"'Node delta momentum'",modifiers:{left:!0}}],staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text"},[t._v("momentum")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.momentum,expression:"momentum"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.momentum},on:{change:t.updateMomentum,input:function(e){e.target.composing||(t.momentum=e.target.value)}}})])])]),n("div",{staticClass:"d-flex flex-row flexatron"},[n("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[n("button",{class:t.btnClass("mirror"),attrs:{type:"button"},on:{click:function(e){t.setExamples("mirror"),t.save()}}},[t._v("mirror")]),n("button",{class:t.btnClass("X2"),attrs:{type:"button"},on:{click:function(e){t.setExamples("X2"),t.save()}}},[t._v("X2")]),n("button",{class:t.btnClass("AND"),attrs:{type:"button"},on:{click:function(e){t.setExamples("AND"),t.save()}}},[t._v("AND")]),n("button",{class:t.btnClass("OR"),attrs:{type:"button"},on:{click:function(e){t.setExamples("OR"),t.save()}}},[t._v("OR")]),n("button",{class:t.btnClass("XOR"),attrs:{type:"button"},on:{click:function(e){t.setExamples("XOR"),t.save()}}},[t._v("XOR")]),n("button",{class:t.btnClass("NAND"),attrs:{type:"button"},on:{click:function(e){t.setExamples("NAND"),t.save()}}},[t._v("NAND")]),n("button",{class:t.btnClass("NOR"),attrs:{type:"button"},on:{click:function(e){t.setExamples("NOR"),t.save()}}},[t._v("NOR")]),n("button",{class:t.btnClass("XNOR"),attrs:{type:"button"},on:{click:function(e){t.setExamples("XNOR"),t.save()}}},[t._v("XNOR")])]),n("div",{staticClass:"input-group special"},[n("div",{staticClass:"input-group-prepend"},[n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){t.save(),t.goesX()}}},[t._v("GOES")])]),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.stop}},[t._v("STOP")]),n("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.save}},[t._v("save")]),n("button",{staticClass:"btn btn-outline-info",attrs:{type:"button"},on:{click:t.load}},[t._v("load")])])]),n("div",{staticClass:"d-flex flex-row flexatron"},[n("table",{attrs:{id:"result"}},t._l(t.results,(function(e,o){return n("tr",{key:o},[n("td",{staticClass:"input"},[t._v(t._s(e.input.join(",")))]),n("td",{staticClass:"ideal"},[t._v(t._s(e.ideal.join(",")))]),n("td",{staticClass:"actual"},[t._v(t._s(e.actual.join(" ")))])])})),0),n("table",{attrs:{id:"current"}},[n("tr",[n("th",[t._v("time")]),n("td",[t._v(t._s(t.elapsedTime)+"s")])]),n("tr",[n("th",[t._v("epoch")]),n("td",[t._v(t._s(t.epoch))])]),n("tr",[n("th",[t._v("MSE")]),n("td",[t._v(t._s(t.MSE))])])])]),n("div",{staticClass:"btn-group",attrs:{role:"group"}}),t.errors?n("Errors",{attrs:{errors:t.errors}}):t._e(),t.network?n("Genome",{attrs:{network:t.network}}):t._e()],1)],1)},i=[],s=n("2ef0"),r=n.n(s),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"graph2d",attrs:{id:"graph2d"}}),n("div",{ref:"graph3d",attrs:{id:"graph3d"}}),n("pre",{staticClass:"json_small",domProps:{innerHTML:t._s(t.clickedNode)}}),n("pre",{staticClass:"json_small",domProps:{innerHTML:t._s(t.clickedEdge)}})])},l=[],p=n("ac32"),c=n("4e46"),d=n("94be"),m=n.n(d),h=n("efd0"),g=n.n(h),v=n("ead3"),f=n.n(v),b=n("6929"),w=n.n(b);n("b680"),n("843c");function x(t,e,n){return(n-t)/(e-t)}function y(t,e,n){return+t+n*(e-t)}var k={normalize:x,denormalize:y,examples:{mirror:[{input:[1,0,0],output:[1,0,0]},{input:[0,1,0],output:[0,1,0]},{input:[0,0,1],output:[0,0,1]}],mazur:[{input:[.05,.1],output:[.01,.99]}],X2:[{input:[x(1,6,1)],output:[x(2,12,2)]},{input:[x(1,6,2)],output:[x(2,12,4)]},{input:[x(1,6,3)],output:[x(2,12,6)]},{input:[x(1,6,4)],output:[x(2,12,8)]},{input:[x(1,6,5)],output:[x(2,12,10)]},{input:[x(1,6,6)],output:[x(2,12,12)]}],AND:[{input:[0,0],output:[0]},{input:[0,1],output:[0]},{input:[1,0],output:[0]},{input:[1,1],output:[1]},{input:[1,1],output:[1]},{input:[1,1],output:[1]}],OR:[{input:[0,0],output:[0]},{input:[0,0],output:[0]},{input:[0,0],output:[0]},{input:[0,1],output:[1]},{input:[1,0],output:[1]},{input:[1,1],output:[1]}],XOR:[{input:[0,1],output:[1]},{input:[0,0],output:[0]},{input:[1,0],output:[1]},{input:[1,1],output:[0]}],NAND:[{input:[0,0],output:[1]},{input:[0,1],output:[1]},{input:[1,0],output:[1]},{input:[1,1],output:[0]}],NOR:[{input:[0,0],output:[1]},{input:[0,1],output:[0]},{input:[1,0],output:[0]},{input:[1,1],output:[0]}],XNOR:[{input:[0,0],output:[1]},{input:[0,1],output:[0]},{input:[1,0],output:[0]},{input:[1,1],output:[1]}]},toDecimaNum:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=t.toFixed(e).padEnd(e,"0");return t<0?""+n:"+"+n}};const N={input:"#4b8c48",hidden:"#48688c",action:"#b80f0f"};function _(t,e,n){return(n-t)/(e-t)}function C(t,e,n){return+t+n*(e-t)}var O=o["a"].extend({name:"vis",props:["network","enable3d"],data(){return{clickedEdge:null,clickedNode:null}},mounted(){this.graph(this.$refs["graph2d"],this.network,this),this.enable3d&&this.graph3d(this.$refs["graph3d"],this.network,this)},methods:{graph:async(t,e,n)=>{const o=r.a.map(e.nodes,(t,n)=>{let o;t.index=n,"input"==t.type&&(o="#dbdd60"),"hidden"==t.type&&(o="#92b6ce"),"output"==t.type&&(o="#ffffff");const a=C(0,1,t.activation);f.a.decToHex(""+a,{prefix:!1});o=w()(o).darken(a).hex();const i=t=>{return{from:t.from.index,to:t.to.index,weight:t.weight}};return{id:""+t.index,title:""+t.index,label:""+t.index,color:{background:o,highlight:"red"},custom:{id:t.index,output:t.activation,bias:t.bias,connections:r.a.map(e.connections,i)}}}),a=new c["a"].DataSet(o),i=r.a.maxBy(e.connections,t=>t.weight).weight,s=r.a.minBy(e.connections,t=>t.weight).weight,u=e.connections.map(t=>{const e=_(s,i,t.weight),n=C(1,10,e);return{from:t.from.index,to:t.to.index,width:n,arrows:"to",color:t.weight>0?"green":"red",custom:{connection:t}}}),l=new c["a"].DataSet(r.a.remove(u,t=>null!==t)),p={autoResize:!0,height:"250px",width:"100%",edges:{smooth:{type:"cubicBezier",forceDirection:"vertical"}},layout:{hierarchical:{direction:"UD",sortMethod:"directed"}},physics:!1},d=new c["a"].Network(t,{nodes:a,edges:l},p);d.on("click",t=>{const e=t.nodes,o=a.get(e)[0],i=t.edges,s=l.get(i)[0];o&&o.custom?n.clickedNode=g()(m()(o.custom,null,2,100)):n.clickedNode="",s&&s.custom&&s.custom.connection?n.clickedEdge=g()(m()(s.custom.connection,null,2,100)):n.clickedEdge=""})},async graph3d(t,e,n){const o=r.a.maxBy(e.connections,t=>t.weight).weight,a=r.a.minBy(e.connections,t=>t.weight).weight,i={nodes:r.a.map(e.nodes,t=>({id:t.index,type:t.type})),links:r.a.map(e.connections,t=>{const e=_(a,o,t.weight),n=C(1,3,e);return{source:t.from.index,target:t.to.index,weight:t.weight,width:n}})};Object(p["a"])()(t).graphData(i).linkDirectionalArrowLength(3.5).linkDirectionalArrowRelPos(1).linkCurvature(.25).linkColor(t=>{return t.weight>0?"green":"red"}).nodeColor(t=>{return"input"==t.type?N.input:"hidden"==t.type?N.hidden:"action"==t.type?N.action:"#ff0000"}).linkWidth(t=>t.width).height(500).backgroundColor("black")}}}),S=O,I=(n("eb33"),n("2877")),E=Object(I["a"])(S,u,l,!1,null,null,null),R=E.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pre",{domProps:{innerHTML:t._s(t.json)}})},T=[];var j=o["a"].extend({name:"vis",props:["network"],data(){return{json:""}},mounted(){const t={connections:[],biases:{}};s["each"](this.network.connections,e=>{t.connections.push({from:e.from.index,to:e.to.index,weight:k.toDecimaNum(e.weight,8)})}),s["each"](this.network.nodes,(e,n)=>{t.biases[n]=k.toDecimaNum(e.bias,8)}),this.json=h(m()(t,null,2,100))}}),M=j,X=Object(I["a"])(M,D,T,!1,null,null,null),P=X.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[this.errors.length>1?n("TrendChart",{attrs:{datasets:t.datasets,grid:{verticalLines:!0,horizontalLines:!0},min:0,labels:t.labels,id:"trend"}}):t._e()],1)},L=[],F=o["a"].extend({name:"errors",props:["errors"],data(){return{chart:this.errors,gradient:["#F00","#0F0"],datasets:[{data:this.errors,fill:!0,className:"error_chart"}],labels:{yLabels:5,yLabelsTextFormatter:t=>k.toDecimaNum(t)}}},mounted(){}}),z=F,G=(n("e122"),Object(I["a"])(z,A,L,!1,null,null,null)),$=G.exports;let{Network:B,Neat:J,methods:U}=n("07c2");var H=o["a"].extend({name:"app",components:{Graph:R,Genome:P,Errors:$},data(){return{population:[],network:null,neat:null,graphNetwork:null,normalize:!1,examples:k.examples.XOR,genome:null,results:[],frame:0,activeExamples:"mirror",goestimes:null===localStorage.getItem("goestimes")?1e3:localStorage.getItem("goestimes"),cutoff:null===localStorage.getItem("cutoff")?.001:localStorage.getItem("cutoff"),updateInterval:null===localStorage.getItem("updateInterval")?100:localStorage.getItem("updateInterval"),learningRate:null===localStorage.getItem("learningRate")?.001:localStorage.getItem("learningRate"),momentum:null===localStorage.getItem("momentum")?.5:localStorage.getItem("momentum"),MSE:0,errors:[],epoch:0,runFunc:null,timeout:null,startTime:new Date,elapsedTime:null,enable3d:!0}},async created(){document.title="liquid carrot vis";let t=localStorage.getItem("activeExamples");null===t&&(t="XOR",this.setExamples(t),this.save(),this.load()),this.setExamples(t),this.load()},methods:{pause(){window.clearTimeout(this.timeout)},resume(){window.setTimeout(this.runFunc,1)},stop(){window.clearTimeout(this.timeout),this.errors=[],this.enable3d=!0},setExamples(t){localStorage.setItem("activeExamples",t),this.normalize=!1,"X2"==t&&(this.normalize=!0),this.errors=[];this.learningRate,this.momentum;this.examples=k.examples[t],this.neat="mirror"==t?new J(3,3):new J(2,1)},updateDisplay(t){const e=[];let n=0;r.a.each(this.examples,t=>{const o=this.network.activate(t.input);r.a.each(t.output,(t,e)=>{n+=Math.pow(o[e]-t,2)}),e.push({input:t.input,ideal:t.output,actual:r.a.map(o,t=>k.toDecimaNum(t,10))})}),this.MSE=.5*n,this.graphNetwork=this.network,this.results=e,this.errors.push(this.MSE),this.errors.length>100&&this.errors.splice(0,1),this.frame++,this.epoch=t,this.elapsedTime=((new Date).getTime()-this.startTime.getTime())/1e3},goesX(){let t=0;this.startTime=new Date,this.enable3d=!1;const e=async()=>{for(let t=0;t<this.updateInterval;t++)this.neat.evolve(this.examples);t+=parseInt(this.updateInterval),this.network=this.neat.getFittest(this.examples),this.updateDisplay(t),this.MSE>this.cutoff&&t<this.goestimes?this.timeout=window.setTimeout(e,10):(this.timeout=!1,this.enable3d=!0,this.runFunc=null)};this.timeout=window.setTimeout(e,0),this.runFunc=e},btnClass(t){return t==localStorage.getItem("activeExamples")?"btn btn-info":"btn btn-secondary"},updateGoestimes(){window.localStorage.setItem("goestimes",this.goestimes),location.reload()},updateCutoff(){window.localStorage.setItem("cutoff",this.cutoff),location.reload()},updateUpdateInterval(){window.localStorage.setItem("updateInterval",this.updateInterval),location.reload()},updateLearningRate(){window.localStorage.setItem("learningRate",this.learningRate),location.reload()},updateMomentum(){window.localStorage.setItem("momentum",this.momentum),location.reload()},save(){console.log("SAVING");const t=r.a.map(this.neat.population,t=>t.toJSON());window.localStorage.setItem("genome",JSON.stringify(t))},load(){console.log("LOADING");const t=JSON.parse(window.localStorage.getItem("genome")),e=r.a.map(t,t=>{return B.fromJSON(t)});this.neat=new J(this.examples),this.neat.population=e,this.network=this.neat.getFittest(this.examples),this.updateDisplay(0)}}}),q=H,V=(n("5c0b"),Object(I["a"])(q,a,i,!1,null,null,null)),W=V.exports,K=(n("d4ce"),n("d4b8"),n("ef9c"),n("b5bf"),n("e37d")),Q=n("4ddc");o["a"].config.productionTip=!1,o["a"].use(K["a"]),o["a"].use(Q["a"]),new o["a"]({render:function(t){return t(W)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var o=n("9c0c"),a=n.n(o);a.a},"9c0c":function(t,e,n){},b797:function(t,e,n){},e122:function(t,e,n){"use strict";var o=n("b797"),a=n.n(o);a.a},e821:function(t,e,n){},eb33:function(t,e,n){"use strict";var o=n("e821"),a=n.n(o);a.a}});
//# sourceMappingURL=app.12376911.js.map