(function(t){function e(e){for(var o,s,a=e[0],u=e[1],c=e[2],l=0,d=[];l<a.length;l++)s=a[l],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);p&&p(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(o=!1)}o&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},r={app:0},i=[];function s(t){return a.p+"js/"+({}[t]||t)+"."+{"chunk-2d0aad91":"193661cb","chunk-2d0c1230":"38b1f0c8","chunk-2d0db883":"b7d9ebb5","chunk-2d0e4836":"1422469e","chunk-2d0e6635":"5c502b70","chunk-2d237763":"4d3f123c","chunk-2d237e64":"5ea4bb8a"}[t]+".js"}function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=r[t]=[e,o]}));e.push(n[2]=o);var i,u=document.createElement("script");u.charset="utf-8",u.timeout=120,a.nc&&u.setAttribute("nonce",a.nc),u.src=s(t);var c=new Error;i=function(e){u.onerror=u.onload=null,clearTimeout(l);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,n[1](c)}r[t]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:u})}),12e4);u.onerror=u.onload=i,document.head.appendChild(u)}return Promise.all(e)},a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var p=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{key:t.frame},[n("Graph",{attrs:{network:t.network,auto2D:t.auto2D,auto3D:t.auto3D}}),n("div",{attrs:{id:"content"}},[n("div",{staticClass:"d-flex flex-row flexatron"},[n("div",{staticClass:"controls"},t._l(t.config.inputsLeft,(function(e,o){return n("div",{key:"input_left_"+o,staticClass:"input-group input-group-sm"},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:e.tooltip,expression:"item.tooltip",modifiers:{right:!0}}],staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text"},[t._v(t._s(e.caption))])]),n("input",{directives:[{name:"input-model",rawName:"v-input-model",value:o,expression:"index"}],staticClass:"form-control",attrs:{type:"text"}})])})),0),n("div",{staticClass:"controls"},t._l(t.config.inputsRight,(function(e,o){return n("div",{key:"input_left_"+o,staticClass:"input-group input-group-sm"},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:e.tooltip,expression:"item.tooltip",modifiers:{left:!0}}],staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text"},[t._v(t._s(e.caption))])]),n("input",{directives:[{name:"input-model",rawName:"v-input-model",value:o,expression:"index"}],staticClass:"form-control",attrs:{type:"text"}})])})),0)]),n("div",{staticClass:"d-flex flex-row flexatron"},[n("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},t._l(t.config.workers,(function(e,o){return n("button",{key:"button_"+o,class:["btn",t.workerClass==o?"btn_blue_active":"btn_blue"],on:{click:function(e){return t.setWorker(o)}}},[t._v(t._s(o))])})),0),n("div",{staticClass:"input-group special"},[n("div",{staticClass:"input-group-prepend"},[n("button",{staticClass:"btn btn_red",attrs:{type:"button"},on:{click:function(e){return t.goes()}}},[t._v(t._s(t.goescaption))]),n("button",{staticClass:"btn btn_green",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v("SAVE")]),n("button",{staticClass:"btn btn_green",attrs:{type:"button"},on:{click:function(e){return t.load()}}},[t._v("LOAD")])])]),n("div",{staticClass:"form-group"},[n("div",{staticClass:"custom-control custom-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.auto2D,expression:"auto2D"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"autoswitch2d"},domProps:{checked:Array.isArray(t.auto2D)?t._i(t.auto2D,null)>-1:t.auto2D},on:{change:function(e){var n=t.auto2D,o=e.target,r=!!o.checked;if(Array.isArray(n)){var i=null,s=t._i(n,i);o.checked?s<0&&(t.auto2D=n.concat([i])):s>-1&&(t.auto2D=n.slice(0,s).concat(n.slice(s+1)))}else t.auto2D=r}}}),n("label",{staticClass:"custom-control-label",attrs:{for:"autoswitch2d"}},[t._v("auto render 2D")])]),n("div",{staticClass:"custom-control custom-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.auto3D,expression:"auto3D"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"autoswitch3d"},domProps:{checked:Array.isArray(t.auto3D)?t._i(t.auto3D,null)>-1:t.auto3D},on:{change:function(e){var n=t.auto3D,o=e.target,r=!!o.checked;if(Array.isArray(n)){var i=null,s=t._i(n,i);o.checked?s<0&&(t.auto3D=n.concat([i])):s>-1&&(t.auto3D=n.slice(0,s).concat(n.slice(s+1)))}else t.auto3D=r}}}),n("label",{staticClass:"custom-control-label",attrs:{for:"autoswitch3d"}},[t._v("auto render 3D")])])])]),n("div",{staticClass:"d-flex flex-row flexatron"},[n("table",{attrs:{id:"result"}},t._l(t.results,(function(e,o){return n("tr",{key:o},[n("td",{staticClass:"input"},[t._v(t._s(e.input.join(",")))]),n("td",{staticClass:"ideal"},[t._v(t._s(e.output.join(",")))]),n("td",{staticClass:"actual"},[t._v(t._s(e.actual.join(" ")))])])})),0),n("table",{attrs:{id:"current"}},[n("tr",[n("th",[t._v("time")]),n("td",[t._v(t._s(t.elapsedTime)+"s")])]),n("tr",[n("th",[t._v("epoch")]),n("td",[t._v(t._s(t.epoch))])]),n("tr",[n("th",[t._v("score")]),n("td",[t._v(t._s(t.score))])])])]),n("div",{staticClass:"btn-group",attrs:{role:"group"}}),t.scores?n("Scores",{attrs:{scores:t.scores}}):t._e(),t.network?n("Genome",{attrs:{network:t.network}}):t._e()],1)],1)},i=[],s=(n("a4d3"),n("4de4"),n("a434"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("159b"),n("bf19"),n("96cf"),n("ade3")),a=n("2ef0"),u=n.n(a),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"graph2D",staticClass:"graph_hide",attrs:{id:"graph2D"}}),n("button",{staticClass:"btn btn_green btn-sm",on:{click:t.graph2D}},[t._v("render 2D")]),n("div",{ref:"graph3D",staticClass:"graph_hide",attrs:{id:"graph3D"}}),n("button",{staticClass:"btn btn_green btn-sm",on:{click:t.graph3D}},[t._v("render 3D")]),n("pre",{staticClass:"json_small",domProps:{innerHTML:t._s(t.clickedNode)}}),n("pre",{staticClass:"json_small",domProps:{innerHTML:t._s(t.clickedEdge)}})])},l=[],p=n("ac32"),d=n("4e46"),h=n("94be"),f=n.n(h),m=n("efd0"),g=n.n(m),v=n("ead3"),b=n.n(v);n("6929"),n("b680"),n("843c");function w(t,e,n){return(n-t)/(e-t)}function k(t,e,n){return+t+n*(e-t)}function y(t,e){var n=0,o=[];return a["each"](e,(function(e){var r=t.activate(e.input);a["each"](e.output,(function(t,i){o.push({input:e.input,output:e.output,actual:r}),n+=Math.pow(t-r[i],2)}))})),{score:.5*n,results:o}}var _={normalize:w,denormalize:k,evaluate:y,examples:{mirror:[{input:[1,0,0],output:[1,0,0]},{input:[0,1,0],output:[0,1,0]},{input:[0,0,1],output:[0,0,1]}],X2:[{input:[w(1,6,1)],output:[w(2,12,2)]},{input:[w(1,6,2)],output:[w(2,12,4)]},{input:[w(1,6,3)],output:[w(2,12,6)]},{input:[w(1,6,4)],output:[w(2,12,8)]},{input:[w(1,6,5)],output:[w(2,12,10)]},{input:[w(1,6,6)],output:[w(2,12,12)]}],AND:[{input:[0,0],output:[0]},{input:[0,1],output:[0]},{input:[1,0],output:[0]},{input:[1,1],output:[1]},{input:[1,1],output:[1]},{input:[1,1],output:[1]}],OR:[{input:[0,0],output:[0]},{input:[0,0],output:[0]},{input:[0,0],output:[0]},{input:[0,1],output:[1]},{input:[1,0],output:[1]},{input:[1,1],output:[1]}],XOR:[{input:[0,1],output:[1]},{input:[0,0],output:[0]},{input:[1,0],output:[1]},{input:[1,1],output:[0]}],NAND:[{input:[0,0],output:[1]},{input:[0,1],output:[1]},{input:[1,0],output:[1]},{input:[1,1],output:[0]}],NOR:[{input:[0,0],output:[1]},{input:[0,1],output:[0]},{input:[1,0],output:[0]},{input:[1,1],output:[0]}],XNOR:[{input:[0,0],output:[1]},{input:[0,1],output:[0]},{input:[1,0],output:[0]},{input:[1,1],output:[1]}]},toDecimaNum:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=t.toFixed(e).padEnd(e,"0");return t<0?""+n:"+"+n}};const D={input:"#4b8c48",hidden:"#48688c",action:"#b80f0f"};function x(t,e,n){return(n-t)/(e-t)}function O(t,e,n){return+t+n*(e-t)}var C=o["a"].extend({name:"vis",props:["network","auto2D","auto3D"],data(){return{enabled2D:!1,enabled3D:!1,clickedEdge:null,clickedNode:null}},mounted(){this.render()},watch:{network(){this.render()}},methods:{render(){this.auto2D&&this.graph2D(),this.auto3D&&this.graph3D()},graph2D(){this.network&&(this.enabled2D=!0,this.render2D(this.$refs["graph2D"],this.network,this))},graph3D(){this.network&&(this.enabled3D=!0,this.render3D(this.$refs["graph3D"],this.network,this))},render2D:async(t,e,n)=>{t.classList.remove("graph_hide"),t.classList.add("graph_show"),u.a.each(e.nodes,(t,e)=>t.index=e);const o=u.a.map(e.nodes,(t,n)=>{let o;"input"==t.type&&(o="#dbdd60"),"hidden"==t.type&&(o="#92b6ce"),"output"==t.type&&(o="#ffffff");const r=O(0,255,t.activation),i=b.a.decToHex(""+Math.round(r),{prefix:!1}),s="#"+i+i+i,a=t=>{return{from:t.from.index,to:t.to.index,weight:t.weight}};return{id:t.index,title:""+t.index,label:""+t.index,color:{background:s,border:o,highlight:"red"},custom:{id:t.index,type:t.type,output:t.activation,bias:t.bias,connections:u.a.map(e.connections,a)}}}),r=new d["a"].DataSet(o),i=u.a.maxBy(e.connections,t=>t.weight).weight,s=u.a.minBy(e.connections,t=>t.weight).weight,a=e.connections.map(t=>{const e=x(s,i,t.weight),n=O(1,10,e);return{from:t.from.index,to:t.to.index,width:n,arrows:"to",color:t.weight>0?"green":"red",custom:{connection:t}}}),c=new d["a"].DataSet(u.a.remove(a,t=>null!==t)),l={autoResize:!0,height:"250px",width:"100%",edges:{smooth:{type:"cubicBezier",forceDirection:"vertical"}},layout:{hierarchical:{direction:"UD",sortMethod:"directed"}},physics:!1},p=new d["a"].Network(t,{nodes:r,edges:c},l);p.on("click",t=>{const e=t.nodes,o=r.get(e)[0],i=t.edges,s=c.get(i)[0];o&&o.custom?n.clickedNode=g()(f()(o.custom,null,2,100)):n.clickedNode="",s&&s.custom&&s.custom.connection?n.clickedEdge=g()(f()(s.custom.connection,null,2,100)):n.clickedEdge=""})},async render3D(t,e,n){t.classList.remove("graph_hide"),t.classList.add("graph_show");const o=u.a.maxBy(e.connections,t=>t.weight).weight,r=u.a.minBy(e.connections,t=>t.weight).weight,i={nodes:u.a.map(e.nodes,t=>({id:t.index,type:t.type})),links:u.a.map(e.connections,t=>{const e=x(r,o,t.weight),n=O(1,3,e);return{source:t.from.index,target:t.to.index,weight:t.weight,width:n}})};Object(p["a"])()(t).graphData(i).linkDirectionalArrowLength(3.5).linkDirectionalArrowRelPos(1).linkCurvature(.25).linkColor(t=>{return t.weight>0?"green":"red"}).nodeColor(t=>{return"input"==t.type?D.input:"hidden"==t.type?D.hidden:"action"==t.type?D.action:"#ff0000"}).linkWidth(t=>t.width).height(500).backgroundColor("black")}}}),j=C,N=(n("eb33"),n("2877")),P=Object(N["a"])(j,c,l,!1,null,null,null),S=P.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pre",{domProps:{innerHTML:t._s(t.json)}})},E=[];var T=o["a"].extend({name:"vis",props:["network"],data(){return{json:""}},mounted(){const t={connections:[],nodes:{}};a["each"](this.network.connections,e=>{t.connections.push({from:e.from.index,to:e.to.index,weight:_.toDecimaNum(e.weight,8)})}),a["each"](this.network.nodes,(e,n)=>{t.nodes[n]={type:e.type,bias:_.toDecimaNum(e.bias,8)}}),this.json=m(f()(t,null,2,100))}}),A=T,L=Object(N["a"])(A,R,E,!1,null,null,null),M=L.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[this.scores.length>1?n("TrendChart",{attrs:{datasets:t.datasets,grid:{verticalLines:!0,horizontalLines:!0},min:0,labels:t.labels,id:"trend"}}):t._e()],1)},W=[],X=o["a"].extend({name:"scores",props:["scores"],data(){return{chart:this.scores,gradient:["#F00","#0F0"],datasets:[{data:this.scores,fill:!0,className:"score_chart"}],labels:{yLabels:5,yLabelsTextFormatter:t=>_.toDecimaNum(t)}}},mounted(){}}),$=X,B=(n("bbe5"),Object(N["a"])($,z,W,!1,null,null,null)),I=B.exports;function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var G=n("07c2"),H=G.Network;o["a"].directive("input-model",{bind:function(t,e,n){t.value=n.context[e.value],t.onchange=function(){n.context[e.value]=t.value}}});var U={inputsLeft:{goestimes:{caption:"X",tooltip:"maximum samples to feed the network",default:1e5},cutoff:{caption:"cutoff",tooltip:"the minimum error at which to stop learning",default:.001},updateInterval:{caption:"update interval",tooltip:"the amount of learning examples before updating the viz",default:1e3}},inputsRight:{learningRate:{caption:"learning rate",tooltip:"the multiplier applied to weight updates",default:.01}},workers:{mirror:{architecture:[3,7,5,4,3]},X2:{},AND:{},OR:{},XOR:{},NAND:{},NOR:{},XNOR:{}}},q={},V={},K=function(t,e){q[t]=localStorage.getItem("vizconfig_"+t)||e,V[t]=function(e){localStorage.setItem("vizconfig_"+t,e)}};u.a.each(U.inputsLeft,(function(t,e){return K(e,t.default)})),u.a.each(U.inputsRight,(function(t,e){return K(e,t.default)})),K("activeWorker",Object.keys(U.workers)[0]);var Q=o["a"].extend({name:"app",components:{Graph:S,Genome:M,Scores:I},data:function(){return F({results:[],scores:[],network:null,genome:null,worker:null,frame:0,score:0,epoch:0,startTime:new Date,elapsedTime:0,auto2D:!0,auto3D:!1,status:"idle",goescaption:"goes",config:U,workerClass:null},q)},watch:V,created:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:document.title="nn-viz",null===this.activeWorker?this.setWorker("mirror"):this.setWorker(this.activeWorker);case 2:case"end":return t.stop()}}),null,this)},methods:{reset:function(){this.status="idle",this.goescaption="goes",this.score=0,this.scores=[]},setWorker:function(t){var e=this;this.worker&&this.worker.terminate(),this.reset(),this.activeWorker=t,this.workerClass=t;n("78ae")("./"+t+".js").then((function(n){e.worker=n.default(),e.worker.onmessage=function(t){if("update"==t.data.event){e.elapsedTime=((new Date).getTime()-e.startTime.getTime())/1e3,e.updateEpoch(t.data.epoch);var n=H.fromJSON(t.data.network);u.a.each(t.data.network.nodes,(function(t,e){return n.nodes[e].activation=t.activation})),e.updateNetwork(n),e.updateScore(t.data.score),e.updateResults(t.data.results)}},e.worker.postMessage({event:"initialize",config:U.workers[t]})}))},updateNetwork:function(t){this.network=t},updateEpoch:function(t){this.epoch=t},updateScore:function(t){this.score=t,this.scores.push(t)},updateResults:function(t){this.results=t},updateDisplay:function(t,e,n){this.epoch=t,this.MSE=n,this.network=e,this.scores.push(n),this.scores.length>100&&this.scores.splice(0,1),this.frame++},goes:function(){switch(this.status){case"idle":this.status="running",this.goescaption="pause",this.worker.postMessage({event:"goes",goestimes:this.goestimes,updateInterval:this.updateInterval,learningRate:this.learningRate,cutoff:this.cutoff}),this.startTime=new Date;break;case"running":this.worker.postMessage({event:"pause"}),this.status="paused",this.goescaption="resume";break;case"paused":this.status="running",this.goescaption="pause",this.worker.postMessage({event:"resume"});break}},buttonClass:function(t){return t==this.activeWorker?"btn btn-info":"btn btn-secondary"},save:function(){if(!this.network)return this.$toasted.show("no network to save",{type:"error",duration:3e3});localStorage.network=JSON.stringify(this.network.toJSON())},load:function(){if(!localStorage.getItem("network"))return this.$toasted.show("no saved network",{type:"error",duration:3e3});this.worker.postMessage({event:"load",network:JSON.parse(localStorage.network)})}},beforeDestroy:function(){this.worker&&this.worker.terminate()}}),Y=Q,Z=(n("5c0b"),Object(N["a"])(Y,r,i,!1,null,null,null)),tt=Z.exports,et=(n("d4ce"),n("d4b8"),n("ef9c"),n("b5bf"),n("e37d")),nt=n("4ddc"),ot=n("a65d"),rt=n.n(ot);o["a"].config.productionTip=!1,o["a"].use(et["a"]),o["a"].use(nt["a"]),o["a"].use(rt.a),new o["a"]({render:function(t){return t(tt)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var o=n("9c0c"),r=n.n(o);r.a},"78ae":function(t,e,n){var o={"./AND.js":["9910","chunk-2d0e6635"],"./NAND.js":["fca2","chunk-2d237e64"],"./NOR.js":["1381","chunk-2d0aad91"],"./OR.js":["4581","chunk-2d0c1230"],"./XNOR.js":["fae7","chunk-2d237763"],"./XOR.js":["6feb","chunk-2d0db883"],"./mirror.js":["9119","chunk-2d0e4836"]};function r(t){if(!n.o(o,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=o[t],r=e[0];return n.e(e[1]).then((function(){return n.t(r,7)}))}r.keys=function(){return Object.keys(o)},r.id="78ae",t.exports=r},"9c0c":function(t,e,n){},bbe5:function(t,e,n){"use strict";var o=n("c934"),r=n.n(o);r.a},c934:function(t,e,n){},e821:function(t,e,n){},eb33:function(t,e,n){"use strict";var o=n("e821"),r=n.n(o);r.a}});
//# sourceMappingURL=app.8f8b464e.js.map